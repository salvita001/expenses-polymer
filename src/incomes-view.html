<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="current-date.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="expenses-view.html">
<link rel="import" href="create-expense.html">

<dom-module id="incomes-view">
  <template>
    <style include="shared-styles">
      :host {
        display: block;
      }
      .income-style{
        width: 25%;
      }
    </style>
    <!-- <expenses-view id="trololo"></expenses-view> -->
    <div class="card income-style">
        <h3>Monthly Incomes</h3>
        <current-date></current-date>
        <paper-input label="salary_1" type="numer" auto-validate allowed-pattern="[0-9]" maxlength="10" value="{{propMonthSalary.salary_1}}">
          <div slot="suffix">€/mes</div>
        </paper-input>
        <paper-input label="salary_2" type="numer" auto-validate allowed-pattern="[0-9]" maxlength="10" value="{{propMonthSalary.salary_2}}">
          <div slot="suffix">€/mes</div>
        </paper-input>
        <paper-input label="football_salary" type="numer" auto-validate allowed-pattern="[0-9]" maxlength="10" value="{{propMonthSalary.football_salary}}">
            <div slot="suffix">€/mes</div>
        </paper-input>
        <paper-input label="home_rent" type="numer" auto-validate allowed-pattern="[0-9]" maxlength="10" value="{{propMonthSalary.home_rent}}">
            <div slot="suffix">€/mes</div>
        </paper-input>
        <span class="last">Total Incomes: [[summaryTotalIncomes]] €</span>
    </div>
  </template>

  <script>
    class IncomesView extends Polymer.Element {
      static get is() { return 'incomes-view'; }
      static get properties() {
        return {
          propMonthSalary:{
            type: Object,
            value: () => {
              return {
                salary_1: '',
                salary_2: '',
                football_salary: '',
                home_rent: ''
              }
            }
          },
          summaryTotalIncomes: String,
              ajaxResponse: {
                type: Array,
                value: () => []
              }
        }
      }

      static get observers() {
        return [
          'totalIncomes(propMonthSalary.salary_1, propMonthSalary.salary_2, propMonthSalary.football_salary, propMonthSalary.home_rent)'
        ];
      }

      totalIncomes(salary_1, salary_2, football_salary, home_rent) {
        salary_1 = salary_1 || 0;
        salary_2 = salary_2 || 0;
        football_salary = football_salary || 0;
        home_rent = home_rent || 0;
        //CALL FUNCTION FROM ANOTHER COMPONENT
        // let expensesView = new ExpensesView();
        // expensesView.sumExpenses();
        this.summaryTotalIncomes = (parseFloat(salary_1) + parseFloat(salary_2) + parseFloat(football_salary) + parseFloat(home_rent)).toString(); 
      }
    }

    window.customElements.define(IncomesView.is, IncomesView);
  </script>
</dom-module>
